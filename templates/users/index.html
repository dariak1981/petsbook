{% extends 'base.html' %}
{% load i18n %}
{% load humanize %}
{% load tz %}
{% load static %}
{% block title %} | {% trans "Dashboard" %} {% endblock %}
{% block content %}


<!-- Account Navbar -->
{% include 'partials/_accountnavbar.html' %}

 <!-- Actions -->
 <div class="account-wrap">


 <section id="actions" class="py-4 bg-custom-secondary-light shadow mb-5">
  <div class="container">
    <div class="container-fluid px-0">
      <div class="row">

          <div class="col action-buttons" data-aos="zoom-in" data-aos-delay="100">
            <button class="btn btn-primary custom-btn btn-block shadow">
              <i class="fas fa-bell"></i> <span class="hidden-phone">{% trans "Active" %}</span><strong> {{ activelistings }}</strong></button>
          </div>

          <div class="col action-buttons" data-aos="zoom-in" data-aos-delay="200">
            <button class="btn btn-primary custom-btn btn-block shadow">
              <i class="fas fa-eye-slash"></i> <span class="hidden-phone">{% trans "Hidden" %}</span><strong> {{ hiddenlistings }}</strong></button>
          </div>

          <div class="col action-buttons" data-aos="zoom-in" data-aos-delay="300">
            <button class="btn btn-primary custom-btn btn-block shadow">
              <i class="fas fa-star"></i> <span class="hidden-phone">{% trans "Archived" %}</span><strong> {{ archivedlistings }}</strong></button>
          </div>

          <div class="col action-buttons" data-aos="zoom-in" data-aos-delay="400">
            <button class="btn btn-primary custom-btn btn-block shadow" name="threads">
              <i class="fas fa-share-alt"></i> <span class="hidden-phone">{% trans "Posts" %}</span><strong> {{ userposts }}</strong></button>
          </div>

          <div class="col action-buttons" data-aos="zoom-in" data-aos-delay="500">
            <button class="btn btn-primary custom-btn btn-block shadow" name="restore">
              <i class="fas fa-comment"></i> <span class="hidden-phone">{% trans "Replies" %}</span><strong> {{ usermessages }}</strong></button>
          </div>

          <div class="col action-buttons" data-aos="zoom-in" data-aos-delay="600">
            <button class="btn btn-primary custom-btn btn-block shadow" name="restore">
              <i class="fas fa-users"></i> <span class="hidden-phone">{% trans "Contacts" %}</span><strong> {{ sitecontacts }}</strong></button>
          </div>


      </div>
    </div>
  </div>
</section>


    <!-- POSTS -->
    <section id="contents">
      <div class="container">
        <div class="row pt-4 pb-5">
          <div class="col-lg-8 col-12 mb-4">
            <div class="card mb-sm-4 bg-custom-primary-light shadow">
              <div class="card-header">
                <h4 class="text-white">{% trans "Latest Published Ads" %}</h4>
              </div>
              <div class="card-body">
                    {% if publishedlistings %}
                    <table class="table table-responsive mb-0" id="no-more-tables">
                      <thead class="thead bg-custom-secondary-light custom-secondary-text">
                        <tr>
                          <th>{% trans "Title" %}</th>
                          <th style="min-width:110px;">{% trans "Date" %}</th>
                          <th>{% trans "Category" %}</th>
                          <th>{% trans "Type" %}</th>
                          <th>{% trans "Location" %}</th>
                          <th></th>
                        </tr>
                      </thead>
                      <tbody class="bg-white">
                      {% for listing in publishedlistings %}
                          <tr>
                            <td>{{ listing.title }}</td>
                            <td>{{ listing.created | date}}</td>
                            <td>

                              {% get_current_language as LANGUAGE_CODE %}
                              {% if LANGUAGE_CODE == 'en' %}{{ listing.category_id.title }}
                              {% elif LANGUAGE_CODE == 'ru' %}{{ listing.category_id.title_ru }}{% endif %}

                            </td>
                            <td>

                              {% if LANGUAGE_CODE == 'en' %}{{ listing.types_id.title }}
                              {% elif LANGUAGE_CODE == 'ru' %}{{ listing.types_id.title_ru }}{% endif %}

                            </td>
                            <td>

                              {% if LANGUAGE_CODE == 'en' %}{{ listing.conditions_id.title }}
                              {% elif LANGUAGE_CODE == 'ru' %}{{ listing.conditions_id.title_ru }}{% endif %}

                            </td>
                            <td>
                              <a href="{% url 'listing' listing.id %}" class="btn btn-secondary shadow">
                                <i class="fas fa-angle-double-right"></i>
                                <!-- add link to main page -->
                              </a>
                            </td>
                          </tr>
                          {% endfor %}
                        </tbody>
                      </table>
                    {% else %}
                    <div class="col-md-12 text-center text-white">
                      <i class="fas fa-edit"></i>
                    </div>
                    {% endif %}


              </div>
            </div>
          </div>

          <!-- RIGHT CARDS -->

          <div class="col-lg-4 col-12 mb-4">

            <div class="card text-center bg-custom-primary-light text-white mb-4 shadow">
              <div class="card-header">
                  <div>
                    {% for user in datejoined %}
                      <h4>{% trans "Joined" %}: {{ user.date_joined.date }}</h4>
                    {% endfor %}
                  </div>
            </div>
              <div class="card-body mx-auto">
                <div style="min-height:210px;">
                  <div class="GaugeMeter" id="GaugeMeter_1"
                      data-percent="100"
                      data-min="20"
                      data-size="200"
                      data-theme="White"
                      data-width="5"
                      data-style="Arch"
                      data-stripe="3"
                      data-animationstep = 1
                      data-animate_gauge_colors=true
                      data-animate_text_colors=true
                      data-label_color="#FFFFFF"
                      data-text_size="0.15"
                      data-showvalue=true
                  ></div>
               </div>

               <div class="col-12 mx-auto mb-4" style="margin-top:-170px;">
                 <div id="number" style="font-size:3rem;" class="mb-0">{{ alllistings }}</div>
                 <i class="fas fa-bell"></i><i class="fas fa-eye-slash m-2"></i><i class="fas fa-star"></i>
               </div>
              </div>
            </div>


            <div class="card text-center bg-custom-primary-light text-white mb-4 shadow">
              <div class="card-body mx-auto py-4">
                <div class="col-12 text-center">
                  <i class="fas fa-bell fa-lg mb-3"></i>
                    {% if pendingtime %}
                    <h4>{% trans "Last Ad Pending Time" %}</h4>
                    {% for time in pendingtime %}
                    <div class="">
                     <p><i class="fas fa-hourglass-start"></i>&nbsp; {{ time.created | naturaltime }}</p>
                    </div>
                    {% endfor %}
                    {% else %}
                    <div class="col-12 mx-auto text-center">
                      <i class="fas fa-edit"></i>
                    </div>
                    {% endif %}
                </div>
              </div>
            </div>

          </div>


      </div>
    </section>

</div>

{% endblock %}
